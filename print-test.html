<!DOCTYPE html>
<html>
<head>
  <title>Bluetooth Printer Test</title>
</head>
<body>
  <h1>Print to Bluetooth Printer</h1>
  <textarea id="text" rows="4" cols="50">Hello, World!</textarea><br>
  <button onclick="connectAndPrint()">Print</button>

  <script>
    async function connectAndPrint() {
      try {
        const device = await navigator.bluetooth.requestDevice({
          filters: [{ namePrefix: "Printer" }], // Optional: adjust based on your printer
          optionalServices: [0xFFE0] // Or use service UUID if known
        });

        const server = await device.gatt.connect();
        const service = await server.getPrimaryService(0xFFE0);
        const characteristic = await service.getCharacteristic(0xFFE1); // Depends on printer

        const text = document.getElementById('text').value;
        const encoder = new TextEncoder();
        const data = encoder.encode(text + "\n\n\n");

        await characteristic.writeValue(data);
        alert("Printed successfully!");
      } catch (err) {
        alert("Error: " + err);
        console.error(err);
      }
    }
  </script>
</body>
</html>
